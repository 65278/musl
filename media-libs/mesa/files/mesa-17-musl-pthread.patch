diff -Naur mesa-17.3.0.orig/src/gallium/state_trackers/nine/nine_debug.c mesa-17.3.0/src/gallium/state_trackers/nine/nine_debug.c
--- mesa-17.3.0.orig/src/gallium/state_trackers/nine/nine_debug.c	2017-12-08 05:49:11.000000000 -0800
+++ mesa-17.3.0/src/gallium/state_trackers/nine/nine_debug.c	2017-12-11 14:24:00.264798233 -0800
@@ -73,11 +73,8 @@
     }
 
 #if defined(HAVE_PTHREAD)
-#  if defined(__GNU_LIBRARY__) && defined(__GLIBC__) && defined(__GLIBC_MINOR__) && \
-      (__GLIBC__ >= 3 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 12))
     if (dbg_flags & DBG_TID)
         tid = pthread_self();
-#  endif
 #endif
 
     if (dbg_flags & flag) {
diff -Naur mesa-17.3.0.orig/src/util/u_thread.h mesa-17.3.0/src/util/u_thread.h
--- mesa-17.3.0.orig/src/util/u_thread.h	2017-12-08 05:49:11.000000000 -0800
+++ mesa-17.3.0/src/util/u_thread.h	2017-12-11 14:19:54.898802627 -0800
@@ -34,6 +34,7 @@
 
 #ifdef HAVE_PTHREAD
 #include <signal.h>
+#include <sys/prctl.h>
 #endif
 
 
@@ -61,10 +62,7 @@
 static inline void u_thread_setname( const char *name )
 {
 #if defined(HAVE_PTHREAD)
-#  if defined(__GNU_LIBRARY__) && defined(__GLIBC__) && defined(__GLIBC_MINOR__) && \
-      (__GLIBC__ >= 3 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 12))
-   pthread_setname_np(pthread_self(), name);
-#  endif
+   prctl(PR_SET_NAME, name);
 #endif
    (void)name;
 }
@@ -92,10 +90,7 @@
 static inline bool u_thread_is_self(thrd_t thread)
 {
 #if defined(HAVE_PTHREAD)
-#  if defined(__GNU_LIBRARY__) && defined(__GLIBC__) && defined(__GLIBC_MINOR__) && \
-      (__GLIBC__ >= 3 || (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 12))
    return pthread_equal(pthread_self(), thread);
-#  endif
 #endif
    return false;
 }
